{"mappings":";;;;;;;;;;;;AAAA;;;;;;AAMA,OAEA,2CAAe;IACb,SAAS,CAAC,MAAM;QACd,IAAI,SAAS,kBACX;YAAA,IAAI,CAAC,SAAS,cAAc,CAAC,yBAAyB;gBACpD,wHAAwH;gBACxH,IAAI,MAAM,SAAS,aAAa,CAAC;gBACjC,IAAI,YAAY,CAAC,MAAM;gBACvB,IAAI,YAAY,CAAC,aAAa;gBAC9B,IAAI,YAAY,CAAC,eAAe;gBAChC,IAAI,YAAY,CACd,SACA;gBAEF,SAAS,IAAI,CAAC,MAAM,CAAC;gBACrB,WACE;oBACE,IAAI,QACF,SAAS,KAAK,IACd,SAAS,aAAa,CAAC,OAAO,eAC9B,SAAS,QAAQ;oBACnB,IAAI,WAAW,GAAG;gBACpB,GACA,4EAA4E;gBAC5E,yEAAyE;gBACzE,eAAe;gBACf;YAEJ;QAAA;IAEJ;AACF","sources":["packages/htmx-route-announcer/src/index.js"],"sourcesContent":["/*\n    Route Announcer Extension\n    ============================\n    This extension adds a route announcer for screen readers to htmx.\n    Based on the route announcer from Astro View Transitions API (https://github.com/withastro/astro/blob/main/packages/astro/src/transitions/router.ts#L63)\n    by Astro.\n*/\n\nexport default {\n  onEvent: (name, _) => {\n    if (name === \"htmx:afterSwap\") {\n      if (!document.getElementById(\"htmx-route-announcer\")) {\n        //  && new URL(event.detail.requestConfig.headers[\"HX-Current-URL\"]).pathname !== event.detail.pathInfo.finalRequestPath\n        let div = document.createElement(\"div\");\n        div.setAttribute(\"id\", \"htmx-route-announcer\");\n        div.setAttribute(\"aria-live\", \"assertive\");\n        div.setAttribute(\"aria-atomic\", \"true\");\n        div.setAttribute(\n          \"style\",\n          \"position:absolute;left:0;top:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px\"\n        );\n        document.body.append(div);\n        setTimeout(\n          () => {\n            let title =\n              document.title ||\n              document.querySelector(\"h1\")?.textContent ||\n              location.pathname;\n            div.textContent = title;\n          },\n          // Much thought went into this magic number; the gist is that screen readers\n          // need to see that the element changed and might not do so if it happens\n          // too quickly.\n          60\n        );\n      }\n    }\n  },\n};\n"],"names":[],"version":3,"file":"index.cjs.map","sourceRoot":"../../../"}